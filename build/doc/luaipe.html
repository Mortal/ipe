<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ipelib: Lua bindings for Ipe</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">The Ipe library documentation</a>&nbsp;&raquo&nbsp;<a class="el" href="lua.html">Programming in Lua</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="luaipe">Lua bindings for Ipe </a></h1><p>These are the Lua methods provided by the Ipe program itself. They are only available to Lua code running inside Ipe.</p>
<h2><a class="anchor" id="luaappui">
Application user interface</a></h2>
<p>The application user interface object provides the GUI for the Ipe program.</p>
<div class="fragment"><pre class="fragment">
-- model is a Lua table containing methods that will be called 
-- by the ui when events occur
ui = AppUi(model)

ui:close()         -- close window

ui:setActionState(name, t) -- set whether action is checked 
t = ui:actionState(name)   -- is action checked?

ui:explain(text)     -- show message in status bar for a few seconds
ui:setWindowTitle(caption)

-- set contents of attribute selectors from style sheet
ui:setupSymbolicNames(styleSheet)

-- set attribute values displayed in user interface
-- 'attributes' table see below
ui:setAttributes(styleSheet, attributes)

-- set layer list from page
ui:setLayers(page, view)  

ui:setActionState(action_name, true_or_false)
state = ui:actionState(action_name)
</pre></div><p>The following methods work on the canvas inside the UI:</p>
<div class="fragment"><pre class="fragment">
ui:setPage(page, view, styleSheet)  -- set page shown on canvas
ui:setSnap(snap)                    -- for 'snap' table see below
ui:setFontPool(p)       -- an opaque object obtained from an ipe.Document

-- 'pan' is a vector indicating the user coordinates at canvas center
v = ui:pan()       
ui:setPan(v)

zoom = ui:zoom()        -- a number
ui:setZoom(zoom)

v = ui:pos()            -- current mouse position, after snapping
v = ui:unsnappedPos()   -- current mouse position, before snapping
v = ui:simpleSnapPos()  -- same, but ignoring angular snap
v = ui:globalPos()      -- mouse position on screen

v = ui:canvasSize()     -- size of canvas in pixels

ui:setPretty(t)         -- true or false
ui:setFifiVisible(t)    -- true or false

ui:update()             -- update canvas and tool
ui:update(false)        -- update tool only
ui:finishTool()

ui:panTool()
ui:selectTool()
ui:transformTool()
ui:shapeTool()
</pre></div> </div>
<hr>
</body></html>
